:root{
  --bg-olive: #6b4423;
  --panel-bg: #fffbe9;
  --panel-inner: #fffef7;
  --accent: #6b4423;
  --muted: #7a6650;
  --shadow-1: 0 8px 40px rgba(107,68,35,0.34);
  --shadow-2: 0 2px 10px rgba(209,190,156,0.33);
  --border: #bba484;
  --panel-radius: 22px;
  --card-radius: 15px;
  --text-dark: #34241a;
}

/* base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: 'Zen Kurenaido','Meiryo','Montserrat',sans-serif;
  background: var(--bg-olive);
  color: #fff;
  margin:0;
  min-height:100vh;
  max-width:100vw;
}
.container{
  max-width:890px;
  margin:0 auto 36px;
  background:var(--panel-bg);
  border-radius:var(--panel-radius);
  box-shadow: var(--shadow-1), var(--shadow-2);
  padding:32px 3vw 24px 3vw;
  color:var(--text-dark);
  position:relative;
}
h1{
  font-family: Montserrat,'Zen Kurenaido',sans-serif;
  font-size:2.2em;
  color:var(--accent);
  font-weight:700;
  text-align:center;
  margin:0 0 28px;
  letter-spacing:2.5px;
  text-shadow:0 2px 13px rgba(209,190,156,0.33);
}

/* form */
form{
  background: var(--panel-inner);
  border-radius: var(--card-radius);
  padding:22px 2vw 14px 2vw;
  margin-bottom:32px;
  box-shadow:0 2px 10px rgba(233,227,209,0.9);
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(170px,1fr));
  gap:15px 19px;
}
label{ font-size:1em; font-weight:500; margin-bottom:3px; display:flex; flex-direction:column; gap:7px; color:var(--text-dark);}
input, select, textarea{
  padding:7px 9px;
  border-radius:9px;
  border:1.6px solid var(--border);
  font-size:1em;
  background:#f8f4ea;
  color:var(--text-dark);
}
textarea{min-height:32px;max-height:88px;resize:vertical;margin-top:5px}

/* table / choices */
.table-choice{ display:flex; flex-wrap:wrap; gap:10px 13px; margin:6px 0; align-items:center; }
.table-checkbox{ margin-right:2px; vertical-align:middle; transform:scale(1.04); }
.table-label{ margin-right:8px; font-size:1em; color:var(--text-dark); }
.table-label > label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;       /* 必要最小限のクリック領域にする */
  border-radius: 8px;
  cursor: pointer;
}
.table-label input[type="checkbox"] {
  margin: 0;
  cursor: pointer;
}
/* --- 追加 --- */
/* 親コンテナの空白部分はクリックを受けないようにする */
#tableChoice, .table-choice {
  /* 親自体は pointer-events を無効にして、子要素のみ受けるようにする */
  pointer-events: none;
}

/* 個々のテーブルアイテム（ラベル）はクリック可能にする */
#tableChoice .table-label,
#tableChoice .table-label * {
  pointer-events: auto; /* ラベルとその中の要素のみクリックを受ける */
}
.cap-text{
  color:#795312;
  font-size:0.93rem;
  background:#eed8b0;
  padding:1px 8px 2px 8px;
  border-radius:10px;
  margin-left:5px;
  box-shadow:0 1px 4px rgba(238,216,176,0.71);
}

/* time choices (radio-like) */
.time-choices{ display:flex; gap:10px; margin:8px 0; align-items:center; flex-wrap:wrap; }
.time-radio{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:92px;
  padding:9px 16px;
  border-radius:16px;
  font-size:1.01rem;
  font-weight:500;
  cursor:pointer;
  transition: background .13s, box-shadow .12s;
  color:var(--text-dark);
  border:1px solid rgba(0,0,0,0.04);
  background:#eed8b0;
  margin:6px;            /* 広めの余白にして重なりを防ぐ */
  position:relative;
  z-index:1;             /* 隣と重なっても pointer を確実に得る */
  box-shadow: none;
}
.time-radio.selected{
  background:var(--accent);
  color:#fff;
  font-weight:700;
  border-color:#795c31;
  box-shadow: 0 6px 18px rgba(107,68,35,0.18);
}
.time-radio:hover{
  /* hoverでは移動させない（transform を使わない）*/
  box-shadow: 0 8px 20px rgba(0,0,0,0.06);
  filter: none;
}

/* ensure buttons don't overlap and capture pointer correctly */
.time-choices .time-radio { pointer-events: auto; }

/* checkboxes cluster */
.checkboxes{ display:flex; gap:13px; margin:7px 0 0 0; align-items:center; flex-wrap:wrap; color:var(--text-dark); }

/* buttons */
button, .act-btn{
  font-size:1.02rem;
  padding:10px 18px;
  margin-top:13px;
  border:none;
  border-radius:14px;
  background: linear-gradient(90deg,#b7a16a 1%, #ffe7b0 90%);
  color:#5a3e1d;
  font-weight:700;
  cursor:pointer;
}
button:hover, .act-btn:hover{ background: linear-gradient(90deg,#c4a773 5%, #e69527 99%); color:#fff; }

/* headings, tables */
h2{ margin-top:18px; font-size:1rem; color:#ae874f; text-align:center; }
.scroll-table{ overflow-x:auto; margin-top:6px; }
table{ border-collapse:separate; border-spacing:0; width:max(890px,98vw); min-width:650px; margin-bottom:5px; box-shadow:0 1px 6px rgba(191,169,139,0.44); font-size:.97rem;}
thead th{ background:#ebd8b0; font-size:.98rem; letter-spacing:1px; color:var(--text-dark); }
tbody tr{ height:34px; }
td{ font-size:.99rem; padding:7px; text-align:center; background:#fffbe6; color:var(--text-dark) }
td.table-no{ background:#eddcb4; color:#594315; font-weight:bold; border-left:4px solid #ecd490; border-right:1.7px solid #dec792; border-radius:10px 0 0 10px; width:55px; letter-spacing:1.2px;}
td.cap-cell{ background:#f8f1d7; font-size:.97rem; color:#ad7713; font-weight:bold; }
td.empty{ background:#f8efe2; color:#aeaeae; border:1.1px dashed #efe1ca; font-style:italic; }
td.reserved{ background:#fcf4e5; color:#a65c06; font-weight:bold; border:2.3px solid #deba7e; letter-spacing:.7px; }
td.phone{ font-size:.97rem; color:#346578; font-weight:600; }
td.num, td.childnum{ font-weight:600; }
td.note-cell{ max-width:180px; font-size:.98rem; color:#a15e10; text-align:left; padding-left:10px; }
td.action-cell{ background:transparent; border:none; }

/* small helpers */
.muted{ color:var(--muted); font-size:.9rem; }
.date-title{ font-size:1.05rem; margin:24px 2px 7px 12px; font-weight:bold; color:#665028; border-bottom:2px dashed #e9c49f; padding-bottom:2px; }
.group-title{ font-size:.97rem; font-weight:bold; margin:17px 0 7px 14px; color:#ad7e3d; }
.edit-form{ background:#fffbe8; padding:12px 18px; border-radius:14px; box-shadow:0 1px 6px rgba(239,211,167,0.47); margin-bottom:13px; }
.edit-form label, .edit-form input, .edit-form select, .edit-form textarea{ font-size:.99rem; }

/* merged cell styling */
.merged-cell { vertical-align: middle; text-align: center; }

/* 行ごとの横線（見やすい色・濃さ） */
table tbody tr td {
  border-bottom: 1px solid #e6d9bf; /* 例: 落ち着いたベージュ系の線 */
}

/* 同一予約で隣接する行は区切り線を消す */
table tbody tr.no-divider td {
  border-bottom: none;
}

/* 最後の行の下も少し余白が欲しければ調整（任意） */
table tbody tr:last-child td {
  /* border-bottom: 1px solid #e6d9bf; 既定のまま */
}

/* 追加または更新する部分：テーブル番号の太さ制御 */
td.table-no {
  /* 通常はやや細めにしておく（予約ありのときの見た目） */
  font-weight: 400;
}

/* 空きテーブルの強調：太字＋色＋フォントを上書き */
td.table-no.available {
  font-family: "Montserrat", "Zen Kurenaido", system-ui, sans-serif !important;
  font-weight: 750 !important; /* 750 を指定（ブラウザ上限は900） */
  color: #231f20 !important;    /* より濃い色で視認性アップ */
  font-size: 1.02rem !important;/* 必要なら少し拡大 */
}

/* ディナーオプションの見た目微調整 */
#dinnerOptions fieldset { border-color:#efd3a4; }
#dinnerOptions legend { font-size:0.98em; }

/* 追加：備考（追加オプション）横並び用スタイル（上書き可能） */
.extras-section {
  margin-top: 14px;
  border-radius: 8px;
  padding: 12px;
  background: #fbf6ec;
  border: 1px solid #eddecb;
  box-sizing: border-box;
}
.extras-title {
  margin: 0 0 10px 0;
  color: #6b4423;
  font-size: 1rem;
  font-weight: 600;
}

/* 横並び1行でラベル＋コントロール（コンパクト） */
.extras-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 6px 0;
  flex-wrap: nowrap;
}
.extras-label {
  min-width: 170px; /* ラベル幅の目安 */
  color: #333;
  font-size: 0.95rem;
}

/* --- 追加：qty ボタンのクリック領域を明確にする --- */
.extras-control {
  display: inline-flex;
  align-items: center;
  gap: 10px;               /* ボタンと数値の間の余白 */
  position: relative;
  box-sizing: border-box;
}

.qty-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;             /* 見た目とクリック領域を一致させる */
  height: 36px;
  min-width: 36px;
  padding: 0;              /* パディングは 0 にして領域を明確化 */
  margin: 0;
  border-radius: 8px;
  cursor: pointer;
  box-sizing: border-box;
  z-index: 2;              /* 数値表示より前面に */
  background-clip: padding-box;
  -webkit-appearance: none;
  appearance: none;
  outline: none;
}

/* 数字部分はクリックを受けない（誤クリックを防ぐ） */
.count-display {
  width: 44px;
  min-width: 44px;
  text-align: center;
  pointer-events: none;    /* ここをクリックしても何も起きない */
  user-select: none;
  z-index: 1;
}

/* フォーカス時の見た目（穏やかに） */
.qty-btn:focus {
  outline: none;
}
.qty-btn:focus-visible {
  outline: 2px solid rgba(107,68,35,0.6);
  box-shadow: none;
}
td.staff-cell { color:#6b4423; font-weight:600; }

/* ===== カレンダー表示：レスポンシブ改善（末尾に追記または既存ブロックを置換） ===== */

#calendarPreview.calendar-preview {
  display: flex;
  gap: 18px;
  flex-wrap: wrap;
  align-items: flex-start;
  justify-content: center; /* 中央寄せにして左右余白を美しく */
  margin-top: 12px;
}

/* 基本は 2 カラム（十分な幅があるとき） */
#calendarPreview .month-box {
  background: #fffaf0;
  border: 1px solid #ebd8b0;
  border-radius: 10px;
  padding: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.04);
  box-sizing: border-box;

  /* 幅の振り分け：横並び時は 48% を目安にし、gap を考慮 */
  flex: 0 1 calc(48% - 9px);
  max-width: 720px;   /* 広い画面でも極端に大きくならないように */
  min-width: 300px;   /* 狭すぎるとセルが潰れるので最低幅を設定 */
}

/* 月タイトル */
#calendarPreview .month-title {
  text-align: center;
  font-weight: 700;
  color: #6b4423;
  margin-bottom: 8px;
}

/* 曜日ヘッダ：必ず7列になるように優先度を上げる */
#calendarPreview .weekdays {
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  gap: 6px;
  color: #8a6b44;
  font-weight: 600;
  text-align: center;
  font-size: 0.92rem;
  margin-bottom: 8px;
  align-items: center;
}

/* 日付グリッド：7列、行高さを固定して崩れを防ぐ */
#calendarPreview .days-grid {
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  gap: 8px;
  /* 行の最小高さ・均一化（アイテム間の高さ差を小さくする） */
  grid-auto-rows: minmax(64px, auto);
}

/* 日セルの調整：テキスト折返し・バッジの縮小対応 */
#calendarPreview .day-cell {
  min-height: 72px;
  padding: 8px;
  background: #fffef7;
  border-radius: 8px;
  border: 1px dashed #f0e6d0;
  box-sizing: border-box;
  position: relative;
  font-size: 0.92rem;

  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  overflow: hidden;         /* はみ出し防止 */
  word-break: break-word;
}

/* 当月外は淡色に */
#calendarPreview .day-cell.inactive { opacity: 0.55; background: #fbf7ee; }

/* 日番号 */
#calendarPreview .day-num { font-weight: 700; color: #6b4423; margin-bottom: 6px; font-size: 1rem; }

/* ステータス領域は下に寄せる */
#calendarPreview .status {
  margin-top: auto;
  display: flex;
  gap: 6px;
  justify-content: center;
  align-items: center;
  font-size: 0.9rem;
  width: 100%;
}

/* バッジは狭い場合に縮むようにする */
#calendarPreview .status .badge {
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: 700;
  color: #fff;
  white-space: nowrap;
  font-size: 0.86rem;
}

/* 金土の分割表示は小さな画面で縦積みに変えられるように */
#calendarPreview .day-status-split {
  display: flex;
  gap: 6px;
  width: 100%;
  justify-content: space-between;
}
#calendarPreview .split-left, #calendarPreview .split-right {
  flex: 1;
  text-align: center;
  padding: 6px 4px;
  border-radius: 6px;
  color: #fff;
  font-weight: 700;
  font-size: 0.88rem;
}
#calendarPreview .split-left { margin-right: 4px; }
#calendarPreview .split-right { margin-left: 4px; }

/* バッジ色 */
#calendarPreview .badge-closed { background: #b56b3c; }
#calendarPreview .badge-available { background: #6b9a5a; }
#calendarPreview .badge-full { background: #c04a4a; }

/* 小さい幅：1カラム（スマホ / 縦 iPad） */
@media (max-width: 920px) {
  #calendarPreview .month-box {
    flex: 0 1 100%;
    max-width: 100%;
    min-width: 0;
  }
  #calendarPreview .day-num { font-size: 0.98rem; }
  #calendarPreview .status .badge, #calendarPreview .split-left, #calendarPreview .split-right {
    font-size: 0.88rem;
    padding: 4px 6px;
  }
}

/* 中〜横向きタブレット向け：2カラムを維持しつつセルを少し圧縮 */
@media (min-width: 921px) and (max-width: 1200px) {
  #calendarPreview .month-box {
    flex: 0 1 calc(50% - 12px);
    max-width: calc(50% - 12px);
    min-width: 300px;
  }
  #calendarPreview .days-grid { gap: 6px; grid-auto-rows: minmax(56px, auto); }
  #calendarPreview .day-cell { min-height: 64px; padding: 6px; }
}

/* 広いデスクトップ：左右に余白を作りつつ大きめの月ボックスを表示 */
@media (min-width: 1201px) {
  #calendarPreview .month-box {
    flex: 0 1 calc(48% - 18px);
    max-width: 720px;
    min-width: 340px;
  }
  #calendarPreview .days-grid { gap: 10px; grid-auto-rows: minmax(72px, auto); }
  #calendarPreview .day-cell { min-height: 80px; padding: 10px; }
}

/* 更に視覚調整：バッジのテキストがはみ出す場合に省略する（必要なら） */
#calendarPreview .status .badge { text-overflow: ellipsis; overflow: hidden; }

/* === カレンダー：常に縦並びにする上書き（末尾に追加） === */
/* calendarPreview 内の month を縦に積む（PC / iPad 横 でも縦表示） */
#calendarPreview {
  display: flex !important;
  flex-direction: column !important; /* ← ここで縦積みに固定 */
  gap: 18px !important;
  align-items: stretch !important;
  justify-content: center !important;
}

/* month-box は幅いっぱいに広げる（横並びにならないように） */
#calendarPreview .month-box {
  flex: 0 1 100% !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
}

/* days-grid は内部で7列のグリッドを維持 */
#calendarPreview .days-grid {
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  gap: 8px !important;
}

/* 微調整：広画面で余白が大きすぎるときの見た目調整 */
@media (min-width: 1400px) {
  #calendarPreview { max-width: 920px; margin-left: auto; margin-right: auto; }
}

/* ===== end responsive calendar tweaks ===== */
