<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ¸…æ°´ã®æ£® - ã‚«ãƒ•ã‚§äºˆç´„ç®¡ç†</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Zen+Kurenaido&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Zen Kurenaido', 'Meiryo', 'Montserrat', sans-serif;
      background: #f8f6f3 URL('https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=1400&q=80') no-repeat center center fixed;
      background-size: cover; color: #2c261e; margin: 0; min-height: 100vh; max-width:100vw; overflow-x:hidden;
    }
    .container {
      max-width: 950px;
      margin: 0 auto 40px auto;
      background: rgba(255,255,255,0.96);
      border-radius: 22px;
      box-shadow: 0 8px 40px #d6c8b277, 0 2px 10px #d1be9c55;
      padding: 30px 2vw 22px 2vw;
      position: relative;
    }
    h1 {
      font-family: Montserrat, 'Zen Kurenaido', sans-serif;
      font-size: 2.38em; color: #4f422d; font-weight: 700;
      text-align: center; margin: 0 0 18px 0;
      letter-spacing: 2.5px;
      text-shadow: 0 2px 13px #bfb6af33;
    }
    .subtext {
      text-align:center; color: #7b6955; font-size:1.15em; margin-bottom:18px; letter-spacing:0.8px;
    }
    form {
      background: #fffef7;
      border-radius: 15px;
      padding: 24px 2vw 18px 2vw;
      margin-bottom: 38px;
      box-shadow: 0 2px 16px #e9e3d1;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px,1fr));
      gap: 18px 22px;
      font-size: 1.07em;
    }
    label {
      font-size: 1.09em; font-weight:500; margin-bottom:2px; margin-top: 2px; display:flex; flex-direction:column; gap:7px;
    }
    input, select, textarea {
      padding: 7px 9px; border-radius: 9px;
      border: 1.6px solid #bba484;
      font-size: 1.07em; background: #f7f4ed;
    }
    .table-choice {
      display: flex; flex-wrap: wrap; gap: 10px 14px; margin: 6px 0; align-items: center;
    }
    .table-checkbox {margin-right: 2px; vertical-align: middle; transform: scale(1.04);}
    .table-label {margin-right: 8px; font-size: 1em;}
    .cap-text {
      color: #795312;
      font-size: 0.93em;
      background: #eed8b0;
      padding: 1.2px 8px 2px 8px;
      border-radius: 10px; margin-left: 5px;
      box-shadow: 0 1px 4px #eed8b0b6;
    }
    .time-choices {
      display: flex; gap: 10px; margin: 8px 0; align-items: center; flex-wrap: wrap;
    }
    .time-radio {
      display: flex; align-items: center;
      background: #eed8b0;
      padding: 7px 16px 7px 12px; border-radius: 16px;
      font-size: 1.01em; font-weight: 500;
      cursor: pointer; transition: background 0.15s; margin-right:6px;
      border: 2px solid #dfbe87;
      letter-spacing:0.5px;
    }
    .time-radio.selected {
      background: #8c7660;
      color: #fff;
      font-weight: bold; border-color: #7e6c53;
    }
    .checkboxes {
      display: flex; gap:13px; margin: 7px 0 0 0; align-items: center; flex-wrap:wrap;
    }
    textarea { min-height:32px; max-height:88px; font-size:1em; resize:vertical; margin-top:5px;}
    button, .act-btn {
      font-size:1.02em; padding: 10px 18px; margin-top:13px;
      border: none; border-radius: 14px;
      background: linear-gradient(90deg, #b7a16a 1%, #ffe7b0 90%);
      color: #5a3e1d; font-weight: bold; cursor: pointer; transition: background 0.13s; box-shadow: 0 1px 4px #efd2a588; letter-spacing:0.6px;
    }
    button:hover, .act-btn:hover { background: linear-gradient(90deg, #c4a773 5%, #e69527 99%); color: #fff;}
    @media (max-width: 900px) {
      .container {max-width:98vw; padding:17px 1vw 10px 1vw;}
      form {font-size:1em;gap:12px 8px; padding:8px 1vw 6px 1vw;}
    }
    @media (max-width: 550px) {
      form{grid-template-columns:1fr;}
      label{font-size:0.92em;}
    }
    h2{margin-top:18px; font-size:1em; color: #a67244; text-align:center;}
    .scroll-table {overflow-x:auto; margin-top:6px;}
    table { border-collapse: separate; border-spacing: 0; width: max(940px,98vw); min-width:700px; margin-bottom: 5px; box-shadow: 0 1px 6px #dcbc8f70; font-size:0.97em; }
    thead th { background: #ebd8b0; font-size:0.98em; letter-spacing:1px;}
    tbody tr { height: 34px;}
    td { font-size: 0.99em; padding: 7px 7px 6px 7px; text-align: center; background: #fffbe6;}
    td.table-no {
      background: #eddcb4; color: #594315; font-weight: bold; border-left: 4px solid #ecd490; border-right: 1.7px solid #dec792;
      border-radius: 10px 0 0 10px; width: 55px; letter-spacing: 1.2px; font-size: 1em;
    }
    td.cap-cell { background: #f8f1d7; font-size: 0.97em; color: #ad7713; font-weight: bold; }
    td.empty { background: #f8efe2; color: #aeaeae; border: 1.1px dashed #efe1ca; font-style: italic; }
    td.reserved { background: #fcf4e5; color: #a65c06; font-weight: bold; border: 2.3px solid #deba7e; letter-spacing:0.7px; }
    td.phone { font-size: 0.97em; color: #346578; font-weight: 600; }
    td.num, td.childnum { font-weight:600; }
    td.note-cell { max-width:180px; font-size:0.98em; color:#a15e10;}
    td.action-cell { background: transparent; border: none;}
    .act-btn { font-size:0.99em; border-radius:8px; border:none; margin: 0 3px; padding:8px 17px; background:#dbb481; color:#60461c; font-weight:592; cursor:pointer; transition: background 0.13s;}
    .act-btn:hover { background: #c66a00; color:#fff;}
    .date-title { font-size:1.05em; margin: 24px 2px 7px 12px; font-weight: bold; color: #665028; border-bottom: 2px dashed #e9c49f; padding-bottom: 2px;}
    .group-title { font-size:0.97em; font-weight:bold; margin: 17px 0 7px 14px; color: #ad7e3d;}
    .edit-form { background:#fffbe8; padding:12px 18px; border-radius:14px; box-shadow: 0 1px 6px #efd3a477; margin-bottom:13px;}
    .edit-form label, .edit-form input, .edit-form select, .edit-form textarea { font-size:0.99em;}
    .edit-form textarea { width:145px;}
    .edit-form-checks { display:flex; gap:12px; margin-top:6px;}
  </style>
  <!-- Firebase setup -->
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <div class="container">
    <h1>æ¸…æ°´ã®æ£®</h1>
    <div class="subtext">å¿ƒåœ°ã‚ˆã„æ£®ã®ç©ºé–“ã§ã€ã‚†ã£ãŸã‚Šã¨ãŠé£Ÿäº‹ã‚’ã€‚ã”äºˆç´„ã¯ä¸‹è¨˜ã‹ã‚‰ã©ã†ãğŸƒ</div>
    <form id="resForm">
      <label>
        æ—¥ä»˜:
        <input type="date" id="date" required>
      </label>
      <label>
        å¤§äººäººæ•°:
        <input type="number" id="numAdult" required min="0" max="10" value="1">
      </label>
      <label>
        å­ã©ã‚‚äººæ•°:
        <input type="number" id="numChild" required min="0" max="10" value="0">
      </label>
      <label style="grid-column: 1/-1;">
        ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰:
        <div class="table-choice" id="tableChoice"></div>
      </label>
      <label style="grid-column: 1/-1;">
        æ™‚é–“å¸¯:
        <div class="time-choices" id="timeChoices"></div>
        <input type="hidden" id="time" required>
      </label>
      <label>
        åå‰ï¼ˆã‚«ã‚¿ã‚«ãƒŠãƒ»ã²ã‚‰ãŒãªï¼‰:
        <input type="text" id="name" pattern="^[ã‚¡-ãƒ´ãƒ¼ã-ã‚“ãƒ¼]+$" required placeholder="ä¾‹ï¼šã‚«ãƒˆã‚¦ ã¾ãŸã¯ ã‹ã¨ã†">
      </label>
      <label>
        é›»è©±ç•ªå·:
        <input type="tel" id="tel" pattern="^[0-9]+$" required placeholder="ä¾‹ï¼š09012345678">
      </label>
      <label style="grid-column: 1/-1;">
        å‚™è€ƒï¼š
        <div class="checkboxes">
          <label><input type="checkbox" id="childPlate" value="ãŠå­æ§˜ãƒ—ãƒ¬ãƒ¼ãƒˆ">ãŠå­æ§˜ãƒ—ãƒ¬ãƒ¼ãƒˆ</label>
          <label><input type="checkbox" id="bdayPlate" value="èª•ç”Ÿæ—¥ãƒ—ãƒ¬ãƒ¼ãƒˆ">èª•ç”Ÿæ—¥ãƒ—ãƒ¬ãƒ¼ãƒˆ</label>
        </div>
        <textarea id="note" placeholder="ã”è¦æœ›ãªã©è‡ªç”±è¨˜å…¥"></textarea>
      </label>
      <button type="submit">äºˆç´„ç™»éŒ²</button>
    </form>
    <h2>äºˆç´„ä¸€è¦§</h2>
    <div class="scroll-table"><section id="listArea"></section></div>
  </div>

<script>
  // Firebase confï¼ˆè‡ªåˆ†ã®configã«å·®ã—æ›¿ãˆ!ï¼‰
  const firebaseConfig = {
    apiKey: "AIzaSyDtyhHZPp4HulSRVn1hJgf003EcrBJh6_u",
    authDomain: "cafe-demo.firebaseapp.com",
    projectId: "cafe-demo",
    storageBucket: "cafe-demo.appspot.com",
    messagingSenderId: "8659190883",
    appId: "1:8659190883:web:486b059e7a7b4fdfe0b731"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const RES_COLLECTION = "shimizu_cafe_reservations";

  // ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
  const TABLE_CAPACITY = {
    "T1": 4, "T2": 4, "T4": 2, "T5": 2, "T6": 2, "T7": 2, "T8": 2, "T9": 2, "T10": 2
  };
  const TABLES = Object.keys(TABLE_CAPACITY);
  const TIMES = [
    { key: "11:00", label: "11æ™‚ï½"},
    { key: "13:00", label: "13æ™‚ï½"},
    { key: "dinner", label: "ãƒ‡ã‚£ãƒŠãƒ¼" }
  ];

  // ãƒ†ãƒ¼ãƒ–ãƒ«ãƒã‚§ãƒƒã‚¯ç”Ÿæˆ
  function renderTableChoices(selected=[]) {
    const tc = document.getElementById("tableChoice");
    tc.innerHTML = "";
    TABLES.forEach(tNo => {
      const span = document.createElement("span");
      span.className = "table-label";
      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.className = "table-checkbox";
      cb.name = "tableNo";
      cb.value = tNo;
      cb.id = "tb-"+tNo;
      if (selected.includes(tNo)) cb.checked = true;
      const label = document.createElement("label");
      label.htmlFor = "tb-"+tNo;
      label.textContent = tNo;
      const cap = document.createElement("span");
      cap.className = "cap-text";
      cap.textContent = TABLE_CAPACITY[tNo]+"äºº";
      label.appendChild(cap);
      span.appendChild(cb);
      span.appendChild(label);
      tc.appendChild(span);
    });
  }
  // æ™‚é–“å¸¯ãƒ©ã‚¸ã‚ªé¢¨ãƒœã‚¿ãƒ³ç”Ÿæˆï¼ˆãƒã‚°ä¿®æ­£æ¸ˆã¿!ï¼‰
  function renderTimeChoices(selectedKey="") {
    const tc = document.getElementById("timeChoices");
    tc.innerHTML = "";
    TIMES.forEach(t=>{
      const span = document.createElement("span");
      span.className = "time-radio";
      if (t.key === selectedKey) span.classList.add("selected");
      span.innerHTML = `<input type="radio" name="reserveTime" value="${t.key}" style="display:none;">${t.label}`;
      span.onclick = () => {
        document.getElementById("time").value = t.key;
        renderTimeChoices(t.key); // â˜…ã“ã“ã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆè¤‡æ•°ãƒœã‚¿ãƒ³ãŒçµ¶å¯¾åå¿œã™ã‚‹ã‚ˆã†ã«ï¼‰
      };
      tc.appendChild(span);
    });
    // åˆæœŸå€¤ä»£å…¥
    if (selectedKey==="") {
      document.getElementById("time").value = "";
    }
  }

  // æ—¥ä»˜é¸æŠã§ä¸€è¦§ã‚‚çµã‚Šè¾¼ã¿
  let selectedDateVal = "";
  document.getElementById("date").addEventListener("change", function(e){
    selectedDateVal = e.target.value;
    renderList(selectedDateVal);
  });

  // äºˆç´„ç™»éŒ²
  document.getElementById("resForm").onsubmit = async function(e) {
    e.preventDefault();
    const date = document.getElementById("date").value;
    const time = document.getElementById("time").value;
    const numAdult = document.getElementById("numAdult").value.trim();
    const numChild = document.getElementById("numChild").value.trim();
    const name = document.getElementById("name").value.trim();
    const tel = document.getElementById("tel").value.trim();
    const childPlate = document.getElementById("childPlate").checked;
    const bdayPlate = document.getElementById("bdayPlate").checked;
    const note = document.getElementById("note").value.trim();
    const tables = [];
    document.querySelectorAll("input[name=tableNo]:checked").forEach(cb => tables.push(cb.value));
    if (!date || !time || numAdult==="" || numChild==="" || !name || !tel) {
      alert("å…¨ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
      return;
    }
    // åå‰ã¯ã‚«ã‚¿ã‚«ãƒŠãƒ»ã²ã‚‰ãŒãªè¨±å¯
    if (!(/^[ã‚¡-ãƒ´ãƒ¼ã-ã‚“ãƒ¼]+$/.test(name))) {
      alert("åå‰ã¯ã‚«ã‚¿ã‚«ãƒŠã‹ã²ã‚‰ãŒãªã§å…¥åŠ›ã—ã¦ãã ã•ã„");
      return;
    }
    if (!(/^[0-9]+$/.test(tel))) {
      alert("é›»è©±ç•ªå·ã¯æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„");
      return;
    }
    if (tables.length === 0) {
      alert("ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·ã‚’é¸æŠã—ã¦ãã ã•ã„");
      return;
    }
    // é‡è¤‡ãƒã‚§ãƒƒã‚¯: åŒã˜æ—¥ä»˜ãƒ»æ™‚é–“å¸¯ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·ã«æ—¢äºˆç´„ãŒã‚ã‚‹ã‹
    const snapshot = await db.collection(RES_COLLECTION).where("date", "==", date).where("time", "==", time).get();
    const overlap = snapshot.docs.some(doc => {
      const r = doc.data();
      return r.tables.some(t=>tables.includes(t));
    });
    if (overlap) {
      alert("é¸æŠã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã§æ—¢ã«äºˆç´„ãŒã‚ã‚Šã¾ã™");
      return;
    }
    // ç™»éŒ²
    await db.collection(RES_COLLECTION).add({
      date, time, numAdult, numChild, tables, name, tel, childPlate, bdayPlate, note
    });
    document.getElementById("resForm").reset();
    document.getElementById("time").value = "";
    renderTableChoices();
    renderTimeChoices();
    selectedDateVal = date;
    renderList(selectedDateVal);
  };

  // ä¸€è¦§ãƒ©ã‚¤ãƒ–æç”»ï¼ˆFirestoreãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ ï¼‰å¹…å•é¡Œå¯¾å¿œ
  let unsubscribe = null;
  function renderList(selectedDate) {
    const area = document.getElementById("listArea");
    area.innerHTML = "<div style='color:#aaa;padding:14px;'>èª­è¾¼ä¸­...</div>";
    if (unsubscribe) unsubscribe();
    unsubscribe = db.collection(RES_COLLECTION)
      .orderBy("date").orderBy("time")
      .onSnapshot((querySnap)=>{
        const docs = querySnap.docs.map((d,i)=>({...d.data(), _id: d.id, index:i}));
        const filtered = selectedDate ? docs.filter(r=>r.date===selectedDate) : docs;
        drawTable(filtered, selectedDate);
      });
  }
  function drawTable(res, selectedDate) {
    const area = document.getElementById("listArea");
    area.innerHTML = "";
    if (res.length === 0) {
      area.innerHTML = "<div style='color:#aaa;padding:14px;'>äºˆç´„ã¯ã‚ã‚Šã¾ã›ã‚“</div>";
      return;
    }
    // ã‚°ãƒ«ãƒ¼ãƒ— {dateâ†’timeâ†’table}
    const grouped = {};
    res.forEach((r, idx) => {
      r.tables.forEach(tableNo => {
        if (!grouped[r.date]) grouped[r.date]={};
        if (!grouped[r.date][r.time]) grouped[r.date][r.time]={};
        grouped[r.date][r.time][tableNo]={
          numAdult:r.numAdult, numChild:r.numChild, name:r.name, tel:r.tel,
          childPlate:r.childPlate, bdayPlate:r.bdayPlate, note:r.note,
          _id:r._id, index:idx, tables:r.tables
        };
      });
    });
    const dates = Object.keys(grouped).sort().filter(date=>!selectedDate||date===selectedDate);
    dates.forEach(date => {
      const dateTitle = document.createElement("div"); dateTitle.className = "date-title"; dateTitle.textContent = date; area.appendChild(dateTitle);

      TIMES.forEach(({key: timeKey, label}) => {
        const title = document.createElement("div"); title.className = "group-title"; title.textContent = "â– "+label; area.appendChild(title);

        const tableWrap=document.createElement("div");tableWrap.className="scroll-table";
        const table = document.createElement("table");
        const thead = document.createElement("thead");
        thead.innerHTML =
          "<tr>" +
            "<th>ãƒ†ãƒ¼ãƒ–ãƒ«</th><th>ã‚­ãƒ£ãƒ‘</th><th>å¤§äºº</th><th>å­ä¾›</th><th>åå‰</th><th>é›»è©±ç•ªå·</th><th>å‚™è€ƒ</th><th>æ“ä½œ</th>" +
          "</tr>";
        table.appendChild(thead);
        const tbody = document.createElement("tbody");

        TABLES.forEach(tNo => {
          const tr = document.createElement("tr");
          const tdNo = document.createElement("td"); tdNo.className="table-no"; tdNo.textContent = tNo; tr.appendChild(tdNo);
          const tdCap = document.createElement("td"); tdCap.className="cap-cell"; tdCap.textContent=TABLE_CAPACITY[tNo]+"äºº"; tr.appendChild(tdCap);

          if (grouped[date][timeKey] && grouped[date][timeKey][tNo]) {
            const info = grouped[date][timeKey][tNo];
            const tdNumA=document.createElement("td"); tdNumA.className="num"; tdNumA.textContent=info.numAdult; tr.appendChild(tdNumA);
            const tdNumC=document.createElement("td"); tdNumC.className="childnum"; tdNumC.textContent=info.numChild; tr.appendChild(tdNumC);
            const tdName=document.createElement("td"); tdName.className="reserved"; tdName.textContent=info.name; tr.appendChild(tdName);
            const tdTel=document.createElement("td"); tdTel.className="phone"; tdTel.textContent=info.tel; tr.appendChild(tdTel);
            // å‚™è€ƒ
            const tdNote=document.createElement("td"); tdNote.className="note-cell";
            let noteStr=[]; if(info.childPlate)noteStr.push("ãŠå­æ§˜ãƒ—ãƒ¬ãƒ¼ãƒˆ"); if(info.bdayPlate)noteStr.push("èª•ç”Ÿæ—¥ãƒ—ãƒ¬ãƒ¼ãƒˆ"); if(info.note && info.note.trim()!=="")noteStr.push(info.note.trim());
            tdNote.textContent=noteStr.join("ï¼"); tr.appendChild(tdNote);

            // æ“ä½œæ¬„
            const tdAct=document.createElement("td"); tdAct.className="action-cell";
            const removeBtn=document.createElement("button");
            removeBtn.className="act-btn"; removeBtn.textContent="å‰Šé™¤";
            removeBtn.onclick= async ()=>{
              if(confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã„ã§ã™ã‹ï¼Ÿ")) {
                await db.collection(RES_COLLECTION).doc(info._id).delete();
              }
            };
            const editBtn=document.createElement("button");
            editBtn.className="act-btn"; editBtn.textContent="å¤‰æ›´";
            editBtn.onclick=()=>{ showEditForm(info, date, timeKey, tNo, selectedDate); };
            tdAct.appendChild(removeBtn); tdAct.appendChild(editBtn);
            tr.appendChild(tdAct);
          } else {
            Array(6).fill(0).forEach(()=> {
              const td = document.createElement("td"); td.className = "empty"; td.textContent = ''; tr.appendChild(td);
            });
          }
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);
        tableWrap.appendChild(table);
        area.appendChild(tableWrap);
      });
    });
  }

  // ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆäººæ•°ã¨å‚™è€ƒã®ã¿ï¼‰
  function showEditForm(info,date,timeKey,tNo,selectedDate){
    const area=document.getElementById("listArea"); area.innerHTML="";
    const editDiv=document.createElement("div"); editDiv.className="edit-form";
    editDiv.innerHTML=`
      <h3 style="margin:7px 0 13px 7px;font-size:1.02em;color:#a77f50">å¤‰æ›´ï¼ˆ${date} ${tNo} ${timeKey}ï¼‰</h3>
      <label>å¤§äººäººæ•°ï¼š
        <input type="number" id="editNumA" value="${info.numAdult}" min="0" max="10" required>
      </label>
      <label>å­ã©ã‚‚äººæ•°ï¼š
        <input type="number" id="editNumC" value="${info.numChild}" min="0" max="10" required>
      </label>
      <div class="edit-form-checks">
        <label><input type="checkbox" id="editChildPlate" ${info.childPlate?"checked":""}>ãŠå­æ§˜ãƒ—ãƒ¬ãƒ¼ãƒˆ</label>
        <label><input type="checkbox" id="editBdayPlate" ${info.bdayPlate?"checked":""}>èª•ç”Ÿæ—¥ãƒ—ãƒ¬ãƒ¼ãƒˆ</label>
      </div>
      <label>ãã®ä»–ï¼ˆè‡ªç”±è¨˜å…¥ï¼‰:<textarea id="editNote">${info.note||""}</textarea></label>
      <div style="margin-top:10px">
        <button class="act-btn" id="saveEditBtn">ä¿å­˜</button>
        <button class="act-btn" id="cancelEditBtn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      </div>
    `;
    area.appendChild(editDiv);
    document.getElementById("saveEditBtn").onclick = async ()=>{
      const editNumA=document.getElementById("editNumA").value.trim();
      const editNumC=document.getElementById("editNumC").value.trim();
      const editChildPlate=document.getElementById("editChildPlate").checked;
      const editBdayPlate=document.getElementById("editBdayPlate").checked;
      const editNote=document.getElementById("editNote").value.trim();
      if(editNumA===""||editNumC===""){alert("äººæ•°å…¥åŠ›å¿…é ˆã§ã™");return;}
      await db.collection(RES_COLLECTION).doc(info._id).update({
        numAdult: editNumA,
        numChild: editNumC,
        childPlate: editChildPlate,
        bdayPlate: editBdayPlate,
        note: editNote
      });
      renderList(selectedDate);
    };
    document.getElementById("cancelEditBtn").onclick =()=>renderList(selectedDate);
  }

  renderTableChoices();
  renderTimeChoices();

  renderList(); // åˆæœŸè¡¨ç¤ºï¼ˆå…¨æœŸé–“è¡¨ç¤ºï¼‰
</script>
</body>
</html>
